var RangePicker;!function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};!function(){e.r(t),e.d(t,{RangePicker:function(){return p},init:function(){return u}});for(var n=function(){return n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},o=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((o=o.apply(e,t||[])).next())}))},r=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},i=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,a=t.length;r<a;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},s=[],l=0;l<=24;l++)s.push(l);var c=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}},d=function(e){return"0".concat((e/60^0)%24).slice(-2)+":"+("0"+e%60).slice(-2)},u=function(e,t,n,o,r){return new p(e,t,n,o,r)},p=function(e,t,l,u,p){var f=this;this.options={readOnly:!1,step:15,total:1440,maxRangesAmount:7,separators:s,convertFunc:d},this.ranges=[],this.onChange=function(){return 0},this.dragBuffer=0,this.lastX=0,this.initialMouseX=0,this.label="",this.rangeEls=[],this.dragCapturedFrom=0,this.dragCapturedTo=0,this.creatingNew=!1,this.createRangepicker=function(e){var t=document.createElement("div");return t.className="ValueRangePicker",t.innerHTML="\n      <label>".concat(e,"</label>\n      <div class='outer-box").concat(f.options.readOnly?" disabled":"",'\'>\n        <div class="header-box">\n          <div class="headers" style="margin:0 -').concat(25/f.options.separators.length,'%">\n            ').concat(f.options.separators.map((function(e){return"<div class='header'>\n                  <span class=\"header-label\">".concat(e,"</span>\n                </div>")})).join(" "),'\n          </div>\n          <div class="separators"  style="padding:0 ').concat(25/f.options.separators.length,'%">\n            ').concat(f.options.separators.map((function(){return"<div class='separator'></div>"})).join(" "),'\n          </div>\n        </div>\n        <div class="padded-box"  style="padding:0 ').concat(25/f.options.separators.length,'%">\n          <div class="selector-box"></div>\n        </div>\n      </div>\n      <div class="popup-padded-box" style="padding:0 ').concat(25/f.options.separators.length,'%">\n        <div class="popup-track" >\n          <div class="popup">\n            <p>From:<span class="from-value"></span></p>\n            <p>To:<span class="to-value"></span></p>\n            <button class="btn-remove">Remove</button>\n          </div>\n          <div class="arrow"></div>\n        </div>\n      </div>\n      \n      '),t.querySelector(".btn-remove").onpointerdown=f.handleRemoveDown,t.querySelector(".btn-remove").onclick=f.handleRemoveClick,t},this.createRange=function(){var e=document.createElement("div");e.className="Range",e.dataset.index=f.rangeEls.length.toString(),e.tabIndex=-1,e.onfocus=f.handleRangeFocus,e.onblur=f.handleRangeBlur,e.innerHTML='\n        <div class="handles">\n          <div class="left-handle"></div>\n          <div class="right-handle"></div>\n        </div>\n        <div class="labels">\n          <span class="left"></span>\n          <span class="right"></span>\n        </div>\n      ';var t=e.querySelector(".left-handle"),n=e.querySelector(".right-handle");return t.addEventListener("pointerdown",f.handleLeftDragStart),n.addEventListener("pointerdown",f.handleRightDragStart),e.addEventListener("pointerdown",f.handleMidDragStart),e},this.toggleReadOnly=function(e){f.options.readOnly=void 0!==e?e:!f.options.readOnly;var t=f.rangepickerEl.querySelector(".outer-box");f.options.readOnly&&!t.classList.contains("disabled")?t.classList.add("disabled"):!f.options.readOnly&&t.classList.contains("disabled")&&t.classList.remove("disabled")},this.handleValueChange=function(e,t){var n=i([],a(f.ranges),!1);n[e]={fromTime:Math.max(t.fromTime,0),toTime:Math.min(t.toTime,f.options.total)};for(var o=!0,r=function(){var r=!1;n.forEach((function(n,o){o!==e&&(t.fromTime<n.toTime&&t.toTime>n.toTime&&(r=!0,n.toTime=t.fromTime),t.toTime>n.fromTime&&t.fromTime<n.toTime&&(r=!0,n.fromTime=t.toTime))})),r||(o=!1)};o;)r();f.setRanges(n),f.update()},this.removeRange=function(e){return o(f,void 0,void 0,(function(){var t;return r(this,(function(n){return this.ranges.splice(e,1),(t=this.rangeEls.splice(e,1))[0].parentElement.removeChild(t[0]),this.rangeEls.forEach((function(e,t){e.dataset.index=t.toString()})),[2]}))}))},this.handleRangeUpdate=function(e){var t=parseInt(e.dataset.index),n=f.ranges[t],o=n.fromTime,r=n.toTime;e.style.width=100*(r-o)/f.options.total+"%",e.style.left=100*o/f.options.total+"%";var a=e.querySelector(".labels .left"),i=e.querySelector(".labels .right");a.innerHTML=f.options.convertFunc(o),i.innerHTML=f.options.convertFunc(r),e.clientWidth<70?i.style.opacity="0":i.style.opacity="1",e.clientWidth<30?a.style.opacity="0":a.style.opacity="1"},this.setRanges=function(e){f.ranges=e},this.handleBoxClick=function(e){if(f.boxElement){var t=e.clientX-c(f.boxElement).left;f.initialMouseX=e.clientX;var n=0;if(t>0){var o=t/f.boxElement.clientWidth,r=(n=f.options.total*o)%f.options.step;n-=r<f.options.step/2?r:r-f.options.step}if(f.ranges.length<f.options.maxRangesAmount){f.creatingNew=!0;var s=f.createRange();f.boxElement.appendChild(s);for(var l=i([],a(f.ranges),!1),d={fromTime:n,toTime:n},u=parseInt(s.dataset.index),p=!0,g=function(){var e=!1;l.forEach((function(t,n){n!==u&&(d.fromTime<t.toTime&&d.toTime>t.toTime&&(e=!0,t.toTime=d.fromTime),d.toTime>t.fromTime&&d.fromTime<t.toTime&&(e=!0,t.fromTime=d.toTime))})),e||(p=!1)};p;)g();l.push(d),f.setRanges(l),f.draggingEl=s,setTimeout((function(){s.focus()}),0),f.rangeEls.push(s),f.dragCapturedFrom=f.ranges[u].fromTime,f.dragCapturedTo=f.ranges[u].toTime,f.lastX=e.clientX,f.dragCapturedFrom=f.ranges[u].fromTime,f.dragCapturedTo=f.ranges[u].toTime,f.update(),document.onpointerup=f.stopDrag,document.onpointermove=f.handleRightDrag}}},this.checkDelete=function(){var e,t;try{for(var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(f.ranges.entries()),o=n.next();!o.done;o=n.next()){var r=a(o.value,2),i=r[0],s=r[1];if((!f.draggingEl||f.draggingEl.dataset.index!==i.toString())&&(s.toTime-s.fromTime<f.options.step||s.fromTime>f.options.total||s.toTime<f.options.step))return f.removeRange(i),void f.checkDelete()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},this.wait=function(){return new Promise((function(e){setTimeout((function(){e()}),40)}))},this.update=function(){return o(f,void 0,void 0,(function(){var e=this;return r(this,(function(t){return!!window.requestAnimationFrame&&window.requestAnimationFrame((function(){e.checkDelete(),e.rangeEls.forEach((function(t){e.handleRangeUpdate(t)})),e.onChange(e.ranges),e.focusedRange&&(e.rangepickerEl.querySelector(".from-value").innerHTML=e.focusedRange.querySelector(".labels .left").innerHTML,e.rangepickerEl.querySelector(".to-value").innerHTML=e.focusedRange.querySelector(".labels .right").innerHTML,e.handlePopupPosition())})),[2]}))}))},this.handlePopupPosition=function(){if(f.focusedRange){var e=f.rangepickerEl.querySelector(".popup"),t=f.rangepickerEl.querySelector(".arrow"),n=f.boxElement,o=f.focusedRange.offsetLeft+f.focusedRange.clientWidth/2,r=e.clientWidth/2-12,a=n.clientWidth-e.clientWidth/2+12;e.style.left=Math.min(Math.max(r,o),a)+"px",t.style.left=Math.min(o,n.clientWidth)+"px"}},this.handleRemoveDown=function(e){e.preventDefault(),f.focusedRange&&f.focusedRange.focus()},this.handleRemoveClick=function(e){if(f.focusedRange){var t=f.focusedRange.dataset.index;f.removeRange(t),f.handleRangeBlur()}},this.handleRangeFocus=function(e){var t,n,o,r;f.popupCloseTimeout&&clearTimeout(f.popupCloseTimeout),f.focusedRange=e.target,null===(n=null===(t=f.rangepickerEl)||void 0===t?void 0:t.querySelector(".popup-track"))||void 0===n||n.classList.remove("closing"),null===(r=null===(o=f.rangepickerEl)||void 0===o?void 0:o.querySelector(".popup-track"))||void 0===r||r.classList.add("show"),f.update()},this.handleRangeBlur=function(){f.focusedRange=void 0,setTimeout((function(){var e;if(!f.focusedRange){f.popupCloseTimeout&&clearTimeout(f.popupCloseTimeout);var t=null===(e=f.rangepickerEl)||void 0===e?void 0:e.querySelector(".popup-track"),n=t.querySelector(".popup"),o=t.querySelector(".arrow");null==t||t.classList.add("closing"),f.popupCloseTimeout=setTimeout((function(){null==t||t.classList.remove("closing"),null==t||t.classList.remove("show"),n.style.left="",o.style.left=""}),300)}}),0)},this.stopDrag=function(e){if(f.dragBuffer=0,f.creatingNew&&e&&f.draggingEl&&f.boxElement&&!f.draggingEl.clientWidth){var t=e.clientX-c(f.boxElement).left;f.initialMouseX=e.clientX;var n=0;if(t>0){var o=t/f.boxElement.clientWidth,r=(n=f.options.total*o)%f.options.step;n-=r<f.options.step/2?r:r-f.options.step}for(var s=i([],a(f.ranges),!1),l={fromTime:Math.max(0,n),toTime:Math.min(n+4*f.options.step,f.options.total)},d=parseInt(f.draggingEl.dataset.index),u=!0,p=function(){var e=!1;s.forEach((function(t,n){n!==d&&(l.fromTime<t.toTime&&l.toTime>t.toTime&&(e=!0,t.toTime=l.fromTime),l.toTime>t.fromTime&&l.fromTime<t.toTime&&(e=!0,t.fromTime=l.toTime))})),e||(u=!1)};u;)p();s[d]=l,f.setRanges(s),f.update()}f.creatingNew=!1,document.onpointermove=null,f.draggingEl=void 0,f.checkDelete(),f.onChange(f.ranges)},this.handleLeftDragStart=function(e){e.stopPropagation(),f.draggingEl=e.currentTarget.parentElement.parentElement,f.lastX=e.clientX;var t=parseInt(f.draggingEl.dataset.index);f.dragCapturedFrom=f.ranges[t].fromTime,f.dragCapturedTo=f.ranges[t].toTime,document.onpointerup=f.stopDrag,document.onpointermove=f.handleLeftDrag},this.handleRightDragStart=function(e){e.stopPropagation(),f.draggingEl=e.currentTarget.parentElement.parentElement,f.lastX=e.clientX;var t=parseInt(f.draggingEl.dataset.index);f.dragCapturedFrom=f.ranges[t].fromTime,f.dragCapturedTo=f.ranges[t].toTime,document.onpointerup=f.stopDrag,document.onpointermove=f.handleRightDrag},this.handleMidDragStart=function(e){e.stopPropagation(),f.draggingEl=e.currentTarget,f.lastX=e.clientX;var t=parseInt(f.draggingEl.dataset.index);f.dragCapturedFrom=f.ranges[t].fromTime,f.dragCapturedTo=f.ranges[t].toTime,document.onpointerup=f.stopDrag,document.onpointermove=f.handleMidDrag},this.handleLeftDrag=function(e){if(void 0===e.buttons?1===e.which:1===e.buttons){var t=f.draggingEl;if(t){var n=parseInt(t.dataset.index),o=(e.clientX-f.lastX)/t.parentElement.clientWidth*f.options.total,r=o%f.options.step,a=f.options.step/2;if(Math.abs(r)<a?o-=r:o-=r+(o>0?-f.options.step:f.options.step),!(o-f.dragBuffer<f.options.step&&o-f.dragBuffer>-f.options.step)){f.dragBuffer=o;var i=f.dragCapturedFrom,s=f.dragCapturedTo;s-(i+o)<0?(i=s,s=s+o-(s-f.dragCapturedFrom)):i+=o,f.handleValueChange(n,{fromTime:i,toTime:s})}}}else f.stopDrag()},this.handleRightDrag=function(e){if(void 0===e.buttons?1===e.which:1===e.buttons){var t=f.draggingEl;if(t){var n=parseInt(t.dataset.index),o=(e.clientX-f.lastX)/t.parentElement.clientWidth*f.options.total,r=o%f.options.step,a=f.options.step/2;if(Math.abs(r)<a?o-=r:o-=r+(o>0?-f.options.step:f.options.step),!(o-f.dragBuffer<f.options.step&&o-f.dragBuffer>-f.options.step)){f.dragBuffer=o,f.creatingNew=!1;var i=f.dragCapturedFrom,s=f.dragCapturedTo;s+o-i<0?(i=i+o-(i-s),s=f.dragCapturedFrom):s+=o,f.handleValueChange(n,{fromTime:i,toTime:s})}}}else f.stopDrag()},this.handleMidDrag=function(e){if(void 0===e.buttons?1===e.which:1===e.buttons){var t=f.draggingEl;if(t){var n=parseInt(t.dataset.index),o=(e.clientX-f.lastX)/t.parentElement.clientWidth*f.options.total,r=o%f.options.step,a=f.options.step/2;if(Math.abs(r)<a?o-=r:o-=r+(o>0?-f.options.step:f.options.step),!(o-f.dragBuffer<f.options.step&&o-f.dragBuffer>-f.options.step)){f.dragBuffer=o,f.creatingNew=!1;var i=f.dragCapturedFrom+o,s=f.dragCapturedTo+o;f.handleValueChange(n,{fromTime:i,toTime:s})}}}else f.stopDrag()},p&&(this.options=n(n({},this.options),p)),this.label=t,this.onChange=u,this.rangepickerEl=this.createRangepicker(t),e.appendChild(this.rangepickerEl),this.boxElement=this.rangepickerEl.querySelector(".selector-box"),this.boxElement.addEventListener("pointerdown",this.handleBoxClick),this.ranges=l,l.forEach((function(e){var t=f.createRange();f.boxElement.appendChild(t),f.rangeEls.push(t)})),this.update()}}(),RangePicker=t}();